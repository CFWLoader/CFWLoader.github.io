---
title: diff命令学习笔记
date: 2017-11-17 19:00:58
tags:
	Linux
	Linux命令
	学习笔记
categories: 系统运维
---

只要一直使用着Linux作为主要的工作操作系统，并且经常码代码的话，总有一天会用到`diff`命令，前面笔者太依赖于git环境了，以致于疏忽了学习这个命令，这段时间又用到了，于是记下来。

### 读懂diff输出含义

在不加参数，直接对比两个文件的情况下，输出中有三种结果:
1. `a` - `add`,即第二个文件比第一个文件多了。
1. `d` - `delete`,即第二个文件比地一个文件少了。
1. `c` - `change`，即第二个文件同行位置下发生了修改。

以下举例进行说明:
首先建立一个`file1.txt`:
``` code
aa
bb
cc
dd
ee
ff
gg
```
随后建立一个`file2.txt`:
``` code
aa
bb
cc
zz
dd
ee
ff
gg
```
使用命令:
``` bash
$ diff file1.txt file2.txt
```
可以看到输出:
``` code
3a4
> zz
```
第一行`3a4`表示变化在第一个文件的第3行，变化的模式是增加(`a`)的内容，而`a`后面的4表示变动的内容发生在第二个文件的第4行,增加了`>`内容`zz`。

换一个理解方法，`3a4`中间的`a`表示了模式，而过了第一个文件第3行以及第二个文件的第4行之后，内容又开始匹配了起来。

修改`file2.txt`:
``` code
aa
bb
zz
dd
ee
ff
gg
```
这时候也执行相同的命令，得到:
``` code
3c3
< cc
---
> zz
```
第一行`3c3`表示内容发生在第一个文件的第3行，变化的模式是更改(`c`)内容，`c`后面的3表示变化的内容在第二个文件的第3行，细节是分为两部分，`---`虚线上方是原来的文件变化，原来的`cc`出去了(`<`),而`zz`进来了(`>`)。

同样换一个理解方法，`3c3`中间的`c`表示了模式，而过了第一个文件第3行以及第二个文件的第3行之后，内容又开始匹配了起来。

再次修改`file2.txt`:
``` code
aa
bb
dd
ee
ff
gg
```
执行相同的`diff`命令:
``` code
3d2
< cc
```
第一行`3d2`表示内容发生在第一个文件的第3行，变化的模式是删除(`d`)内容，`d`后面的3表示变化的内容在第二个文件的第3行，原来的`cc`被删除了(`<`)。

同样，`3d2`中间的`d`表示了模式，而过了第一个文件第3行以及第二个文件的第2行之后，内容又开始匹配了起来。